!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/cdk/coercion"),require("rxjs"),require("rxjs/operators"),require("@angular/common")):"function"==typeof define&&define.amd?define("alphabetical-scroll-bar",["exports","@angular/core","@angular/cdk/coercion","rxjs","rxjs/operators","@angular/common"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["alphabetical-scroll-bar"]={},e.ng.core,e.ng.cdk.coercion,e.rxjs,e.rxjs.operators,e.ng.common)}(this,(function(e,t,i,n,r,o){"use strict";var s=function(){};s.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new s},token:s,providedIn:"root"}),s.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],s.ctorParameters=function(){return[]};Object.create;function a(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var n,r,o=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){r={error:e}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s}function l(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e}Object.create;var c=function(){function e(e){this._cdr=e,this._alphabet=l("ABCDEFGHIJKLMNOPQRSTUVWXYZ"),this._overflowDivider="·",this._validLetters=this._alphabet,this._disableInvalidLetters=!1,this._prioritizeHidingInvalidLetters=!1,this._letterMagnification=!0,this._magnifyDividers=!1,this._magnificationMultiplier=2,this._magnificationCurve=[1,.7,.5,.3,.1],this._exactX=!1,this._navigateOnHover=!1,this._letterSpacing="1%",this.letterChange$=new t.EventEmitter,this.isActive$=new t.EventEmitter,this._lastEmittedActive=!1,this._isComponentActive=!1,this._cancellationToken$=new n.Subject,this._offsetSizeCheckInterval=0,this._lettersShortened=!1}return Object.defineProperty(e.prototype,"alphabet",{get:function(){return this._alphabet},set:function(e){if("string"==typeof e)this._alphabet=l(e);else{if(!Array.isArray(e)||!e.every((function(e){return"string"==typeof e})))throw new Error("alphabet must be a string or an array of strings");this._alphabet=e}this.checkVisibleLetters(!0),this.validLetters=this._alphabet},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"overflowDivider",{get:function(){return this._overflowDivider},set:function(e){if("string"!=typeof e&&null!=e)throw new Error("overflowDivider must be a string");this._overflowDivider=e,this.checkVisibleLetters(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"validLetters",{get:function(){return this._validLetters},set:function(e){this._validLetters=e,this.checkVisibleLetters(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"disableInvalidLetters",{get:function(){return this._disableInvalidLetters},set:function(e){this._disableInvalidLetters=i.coerceBooleanProperty(e),this.checkVisibleLetters(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"prioritizeHidingInvalidLetters",{get:function(){return this._prioritizeHidingInvalidLetters},set:function(e){this._prioritizeHidingInvalidLetters=i.coerceBooleanProperty(e),this.checkVisibleLetters(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterMagnification",{get:function(){return this._letterMagnification},set:function(e){this._letterMagnification=i.coerceBooleanProperty(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"magnifyDividers",{get:function(){return this._magnifyDividers},set:function(e){this._magnifyDividers=i.coerceBooleanProperty(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"magnificationMultiplier",{get:function(){return this._magnificationMultiplier},set:function(e){this._magnificationMultiplier=e,this.checkVisibleLetters(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"magnificationCurve",{get:function(){return this._magnificationCurve},set:function(e){if(!Array.isArray(e)||!e.every((function(e){return"number"==typeof e&&e>=0&&e<=1})))throw new Error("magnificationCurve must be an array of numbers between 0 and 1");this._magnificationCurve=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exactX",{get:function(){return this._exactX},set:function(e){this._exactX=i.coerceBooleanProperty(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"navigateOnHover",{get:function(){return this._navigateOnHover},set:function(e){this._navigateOnHover=i.coerceBooleanProperty(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){"string"==typeof e?(this._letterSpacing=this.stringToNumber(e),e.includes("%")&&(this._letterSpacing=this._letterSpacing.toString()+"%")):this._letterSpacing=i.coerceNumberProperty(e),this.checkVisibleLetters(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsetSizeCheckInterval",{get:function(){return this._offsetSizeCheckInterval},set:function(e){var t,o=this;null===(t=this._offsetSizeCheckIntervalSubscription)||void 0===t||t.unsubscribe(),this._offsetSizeCheckInterval=i.coerceNumberProperty(e),this._offsetSizeCheckInterval&&(this._offsetSizeCheckIntervalSubscription=n.interval(this._offsetSizeCheckInterval).pipe(r.takeUntil(this._cancellationToken$)).subscribe((function(){return o.checkVisibleLetters()})))},enumerable:!1,configurable:!0}),e.prototype.ngAfterViewInit=function(){var e=this;n.fromEvent(window,"resize").pipe(r.takeUntil(this._cancellationToken$)).subscribe((function(){return e.checkVisibleLetters()}))},e.prototype.ngDoCheck=function(){this.checkVisibleLetters()},e.prototype.ngOnDestroy=function(){this._cancellationToken$.next(),this._cancellationToken$.complete()},e.prototype.checkVisibleLetters=function(e){var t=this,i=this.alphabetContainer.nativeElement.clientHeight;if(e||i!==this._lastHeight){this._lastHeight=i;var n=this.alphabet,r=0,o=this.stringToNumber(getComputedStyle(this.alphabetContainer.nativeElement).getPropertyValue("font-size"));if(this.letterMagnification&&(o*=this.magnificationMultiplier),"number"==typeof this.letterSpacing?r=this.letterSpacing:"string"==typeof this.letterSpacing&&(r=this.stringToNumber(this.letterSpacing),this.letterSpacing.endsWith("%")&&(r=i*(r/100))),o+=r,this.prioritizeHidingInvalidLetters&&this.validLetters&&i/o<n.length&&(n=this.validLetters),this._lettersShortened=i/o<n.length,this._lettersShortened){var s=n.length-Math.floor(i/o);s===n.length&&(n=[]);for(var a=this.getNumHiddenHalves(s,n.length)+1,l=n.slice(0,Math.ceil(n.length/2)),c=n.slice(Math.floor(n.length/2)).reverse(),h=0;h<a;h++)l=l.filter((function(e,t){return t%2==0})),c=c.filter((function(e,t){return t%2==0}));l=l.reduce((function(e,i,n){return n>0&&t.overflowDivider&&e.push(t.overflowDivider),e.push(i),e}),[]),c=c.reduce((function(e,i,n){return n>0&&t.overflowDivider&&e.push(t.overflowDivider),e.push(i),e}),[]),this.alphabet.length%2==0&&this.overflowDivider&&l.push(this.overflowDivider),n=l.concat(c.reverse())}this._cdr.markForCheck(),this.visibleLetters=n}},e.prototype.getNumHiddenHalves=function(e,t){return e>t/2?1+this.getNumHiddenHalves(e%(t/2),Math.ceil(t/2)):0},e.prototype.isValid=function(e){var t;return!1!==(null===(t=this.validLetters)||void 0===t?void 0:t.includes(e))||e===this.overflowDivider},e.prototype.getLetterStyle=function(e){var t=this;if(void 0===this.magIndex&&null===this.magIndex||!this.magnifyDividers&&this.visibleLetters[e]===this.overflowDivider||this.disableInvalidLetters&&!this.isValid(this.visibleLetters[e]))return{};var i=this.visibleLetters.filter((function(e){return e!==t.overflowDivider})),n=Math.round(e/this.visibleLetters.length*i.length),r=Math.round(this.magIndex/this.visibleLetters.length*i.length),o=this.magnifyDividers?Math.abs(this.magIndex-e):Math.abs(r-n),s={transform:"scale("+(o<this.magnificationCurve.length-1?this.magnificationCurve[o]*(this.magnificationMultiplier-1)+1:1)+")",zIndex:this.magIndex===e?1:0};return this._isComponentActive&&this.letterMagnification?s:{}},e.prototype.focusEvent=function(e,t){var i,n,r,o;this._lastEmittedActive||this.isActive$.emit(this._lastEmittedActive=!0),this._isComponentActive="click"!=t,this.setLetterFromCoordinates(null!==(n=null===(i=e.touches)||void 0===i?void 0:i[0].clientX)&&void 0!==n?n:e.clientX,null!==(o=null===(r=e.touches)||void 0===r?void 0:r[0].clientY)&&void 0!==o?o:e.clientY),this._lastEmittedLetter===this.letterSelected||!this.navigateOnHover&&t.includes("mouse")||this.letterChange$.emit(this._lastEmittedLetter=this.letterSelected)},e.prototype.focusEnd=function(){this.isActive$.emit(this._isComponentActive=this._lastEmittedActive=!1)},e.prototype.setLetterFromCoordinates=function(e,t){if(this.exactX){var i=this.alphabetContainer.nativeElement.getBoundingClientRect().right,n=this.alphabetContainer.nativeElement.getBoundingClientRect().left;if(this._isComponentActive=e>n&&e<i,!this._isComponentActive)return void(this.visualLetterIndex=this.visualLetterIndex=null)}var r=this.alphabetContainer.nativeElement.clientHeight,o=Math.min(Math.max(0,t-this.alphabetContainer.nativeElement.getBoundingClientRect().top),r),s=o/r*(this.visibleLetters.length-1),a=Math.round(s)<s;s=Math.round(s),this.magIndex=s,this.visualLetterIndex=this.getClosestValidLetterIndex(this.visibleLetters,s,a),this._lettersShortened?this.validLetters?this.letterSelected=this.validLetters[Math.round(o/r*(this.validLetters.length-1))]:this.letterSelected=this.alphabet[this.getClosestValidLetterIndex(this.alphabet,s,a)]:this.letterSelected=this.visibleLetters[this.visualLetterIndex]},e.prototype.getClosestValidLetterIndex=function(e,t,i){var n=e.map((function(e){return e.toLowerCase()})),r=this.validLetters.map((function(e){return e.toLowerCase()})).map((function(e){return n.indexOf(e)}));return r.length>0?r.reduce((function(e,n){return i?Math.abs(n-t)>Math.abs(e-t)?e:n:Math.abs(n-t)<Math.abs(e-t)?n:e})):null},e.prototype.stringToNumber=function(e){return Number(null==e?void 0:e.match(/[\.\d]+/)[0])},e}();c.decorators=[{type:t.Component,args:[{selector:"alphabetical-scroll-bar",template:'<div\n  #alphabetContainer\n  class="container"\n  [class.cursor-pointer]="!navigateOnHover"\n>\n  <div\n    *ngFor="let letter of visibleLetters; let i = index"\n    class="letter"\n    [class.letter-disabled]="disableInvalidLetters && !isValid(letter)"\n    [class.letter-is-hidden-value]="letter === hiddenLetterValue"\n    [ngStyle]="getLetterStyle(i)"\n  >\n    <label>{{ letter }}</label>\n  </div>\n</div>\n',changeDetection:t.ChangeDetectionStrategy.OnPush,styles:[":host{bottom:0;font-size:min(20px,max(12px,1vh));padding:calc(min(20px, max(12px, 1vh))*2) 0;position:absolute;right:-12px;top:0;z-index:1000}:host .container{align-items:center;display:flex;flex-direction:column;height:100%;justify-content:space-between}:host .container.cursor-pointer{cursor:pointer}:host .container .letter{padding:0 20px;pointer-events:none;position:relative;transform-origin:60%;transition:transform .2s ease-in-out}:host .container .letter label{left:50%;position:absolute;top:50%;transform:translate(-50%,-50%)}:host .container .letter.letter-disabled{opacity:.3}:host .container .letter.letter-is-hidden-value{transform:scale(2);transform-origin:center}"]}]}],c.ctorParameters=function(){return[{type:t.ChangeDetectorRef}]},c.propDecorators={alphabetContainer:[{type:t.ViewChild,args:["alphabetContainer",{static:!0}]}],alphabet:[{type:t.Input}],overflowDivider:[{type:t.Input}],validLetters:[{type:t.Input}],disableInvalidLetters:[{type:t.Input}],prioritizeHidingInvalidLetters:[{type:t.Input}],letterMagnification:[{type:t.Input}],magnifyDividers:[{type:t.Input}],magnificationMultiplier:[{type:t.Input}],magnificationCurve:[{type:t.Input}],exactX:[{type:t.Input}],navigateOnHover:[{type:t.Input}],letterSpacing:[{type:t.Input}],letterChange$:[{type:t.Output,args:["letterChange"]}],isActive$:[{type:t.Output,args:["isActive"]}],offsetSizeCheckInterval:[{type:t.Input}],focusEvent:[{type:t.HostListener,args:["mousemove",["$event","$event.type"]]},{type:t.HostListener,args:["mouseenter",["$event","$event.type"]]},{type:t.HostListener,args:["touchmove",["$event","$event.type"]]},{type:t.HostListener,args:["touchstart",["$event","$event.type"]]},{type:t.HostListener,args:["click",["$event","$event.type"]]}],focusEnd:[{type:t.HostListener,args:["mouseleave"]},{type:t.HostListener,args:["touchend"]}]};var h=function(){};h.decorators=[{type:t.NgModule,args:[{declarations:[c],imports:[o.CommonModule],exports:[c]}]}],e.AlphabeticalScrollBarComponent=c,e.AlphabeticalScrollBarModule=h,e.AlphabeticalScrollBarService=s,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=alphabetical-scroll-bar.umd.min.js.map